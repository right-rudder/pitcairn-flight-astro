---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import Hero75 from "../components/Hero75.astro";
import ImageComp from "../components/ImageComp.astro";
import CTAMeetOurFleet from "../components/ProgramSlug/CTAMeetOurFleet.astro";
import ProgramsGrid from "../components/Programs/ProgramsGrid.astro";
import BookDownloadSection from "../components/BookDownloadSection.astro";
import LocationSection from "../components/LocationSection.astro";
import DiscoveryFlightCTA from "../components/Programs/DiscoveryFlightCTA.astro";

type Program = CollectionEntry<"programs">;

const programs = await getCollection("programs");
const sortedPrograms = programs.sort(
  (a: Program, b: Program) => (a.data.order || 999) - (b.data.order || 999),
);

const heroData = {
  image: {
    src: "/src/assets/placeholder-dark-clouds-pitcairn-flight-academy-instrument-rating.webp",
    alt: "imagePlaceholder",
  },
  title: "Pilot Training",
  subTitle:
    "Pitcairn Flight Academy is the perfect place to kickstart your pilot training journey. We're here to help you get your wings and achieve your dream of becoming a pilot. Join us and start on an exciting adventure in the world of aviation. Explore our comprehensive flight training programs designed to take you from zero to hero, learn about the Pilot Training Process and How to become a pilot.",
  cta: [
    {
      url: "/enroll",
      text: "Enroll Now",
    },
  ],
};

const metaProps = {
  siteTitle: "Flight Training Programs | {COMPANY_NAME}",
  siteDescription:
    "Explore our Part 141 and Part 61 pilot training programs. From the Professional Airline Pilot Track to individual ratings, we provide a structured path to the cockpit.",
  siteKeywords:
    "flight school programs, professional pilot track, private pilot license, instrument rating, commercial pilot certificate, multi-engine training,  flight courses",
};
---

<BaseLayout {...metaProps}>
  <Hero75 data={heroData} />
  <ProgramsGrid />
  <DiscoveryFlightCTA />
  <!-- <OldProgrammGrid /> -->
  <BookDownloadSection />
  <LocationSection />
</BaseLayout>
