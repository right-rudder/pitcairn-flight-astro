---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import type { CollectionEntry } from "astro:content";
import Hero75 from "../../components/Hero75.astro";
import ImageComp from "../../components/ImageComp.astro";
import Intro from "../../components/Aircraft/Intro.astro";
import { COMPANY_NAME } from "../../data/consts";

type Aircraft = CollectionEntry<"aircraft">;

const aircraft = await getCollection("aircraft");
const sortedAircraft = aircraft.sort(
  (a: Aircraft, b: Aircraft) => (a.data.order || 999) - (b.data.order || 999),
);

const heroData = {
  image: {
    src: "/src/assets/old-website/pitcairn-2-planes.webp",
    alt: "Two planes at Pitcairn Flight Academy",
  },
  title: "The Fleet",
  subTitle:
    "Train in a well-maintained fleet of modern aircraft equipped with the latest Garmin avionics and safety technology.",
};

const metaProps = {
  siteTitle: `${COMPANY_NAME} | Our Fleet | Aircraft Rentals`,
  siteDescription: `Rent well-maintained training aircraft at ${COMPANY_NAME}, including Cessna 152s, 172s, and a Beechcraft Sierra.`,
  siteKeywords: `${COMPANY_NAME}, aircraft rentals, plane rental PA, Cessna rental, Beechcraft Sierra`,
};
---

<BaseLayout {...metaProps}>
  <!-- <Hero75 data={heroData} /> -->
  <Intro />
  <section class="py-24 bg-slate-50">
    <div class="max-w-7xl mx-auto px-6">
      <div class="text-center mb-20">
        <span
          class="inline-block py-1 px-4 bg-sky-100 text-sky-700 text-xs font-bold tracking-[0.2em] uppercase rounded mb-4"
        >
          Fleet Readiness
        </span>
        <h2
          class="text-4xl md:text-5xl font-bold text-slate-900 mb-6 tracking-tight"
        >
          Precision <span class="text-sky-600">Training Tools</span>
        </h2>
        <p
          class="text-xl text-slate-600 max-w-2xl mx-auto font-light leading-relaxed"
        >
          Our aircraft are maintained to the highest Part 141 standards,
          ensuring your training is safe, consistent, and technologically
          relevant.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">
        {
          sortedAircraft.map((plane: Aircraft) => (
            <a
              href={`/airplane-rentals/${plane.slug}`}
              class="group bg-white rounded-[2rem] shadow-sm border border-slate-200 overflow-hidden hover:shadow-2xl hover:shadow-sky-100 transition-all duration-500 hover:-translate-y-2 flex flex-col"
            >
              <div class="relative h-64 overflow-hidden">
                <ImageComp
                  src={plane.data.image}
                  alt={plane.data.name}
                  class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                />
                <div class="absolute top-4 right-4">
                  <span class="px-3 py-1 bg-slate-900/80 backdrop-blur-md text-white text-[11px] font-mono font-bold rounded-md border border-white/20">
                    {plane.data.tailNumber}
                  </span>
                </div>
              </div>

              <div class="p-8 flex-grow flex flex-col">
                <h3 class="text-2xl font-bold text-slate-900 mb-2 group-hover:text-sky-600 transition-colors">
                  {plane.data.name}
                </h3>

                <p class="text-slate-500 text-sm leading-relaxed mb-6 line-clamp-2">
                  {plane.data.description}
                </p>

                {plane.data.specifications && (
                  <div class="mt-auto grid grid-cols-3 gap-2 pt-6 border-t border-slate-100">
                    {plane.data.model && (
                      <div class="flex flex-col">
                        <span class="text-[10px] uppercase font-bold text-slate-400 tracking-wider">
                          Model
                        </span>
                        <span class="text-xs font-bold text-slate-700 truncate">
                          {plane.data.model}
                        </span>
                      </div>
                    )}
                    {plane.data.specifications.seats && (
                      <div class="flex flex-col">
                        <span class="text-[10px] uppercase font-bold text-slate-400 tracking-wider">
                          Capacity
                        </span>
                        <span class="text-xs font-bold text-slate-700">
                          {plane.data.specifications.seats} Seats
                        </span>
                      </div>
                    )}
                    {plane.data.specifications.cruiseSpeed && (
                      <div class="flex flex-col">
                        <span class="text-[10px] uppercase font-bold text-slate-400 tracking-wider">
                          Cruise
                        </span>
                        <span class="text-xs font-bold text-slate-700">
                          {plane.data.specifications.cruiseSpeed}
                        </span>
                      </div>
                    )}
                  </div>
                )}

                <div class="mt-6 flex items-center text-sky-600 text-xs font-bold uppercase tracking-widest group-hover:gap-3 transition-all">
                  Aircraft Specs
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-4 h-4 ml-1"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2.5"
                      d="M13 7l5 5m0 0l-5 5m5-5H6"
                    />
                  </svg>
                </div>
              </div>
            </a>
          ))
        }
      </div>
    </div>
  </section>
</BaseLayout>
