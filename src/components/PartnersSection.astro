---
import ImageComp from "./ImageComp.astro";

interface Props {
  data: {
    eyebrow: string;
    headline: string;
    cards: {
      title: string;
      text: string;
      logo: string;
      logoClass: string;
      href: string;
    }[];
  };
}

const { data } = Astro.props;
---

<section class="py-6 md:pb-24 bg-white overflow-hidden">
  <div class="max-w-7xl mx-auto px-5 md:px-8 lg:px-12 text-center">
    <p class="text-sky-800 font-bold uppercase tracking-widest text-2xl mb-1">
      {data.eyebrow}
    </p>
    <!-- <h2
      class="title !text-[2.5rem] uppercase !font-main-header tracking-wide mb-24 mx-auto max-w-3xl"
      set:html={data.headline}
    /> -->

    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 py-12"
      id="stagger-container"
    >
      {
        data.cards.map((card, index) => {
          return (
            <a
              class="stagger-card  translate-y-10 flex flex-col items-center justify-center group hover:border-sky-600 hover:-translate-y-1 transition-all duration-700 px-4  rounded "
              style={`transition-delay: ${index * 150}ms;`}
              href={card.href}
            >
              <div
                class={
                  "flex items-center justify-center transition-colors duration-300 " +
                  card.logoClass
                }
              >
                <ImageComp
                  src={card.logo}
                  alt={card.title}
                  class="object-cover w-full"
                />
              </div>
              {/* <div class="flex flex-col items-center justify-center w-full h-full">
                <h3 class="text-xl font-bold text-sky-800 uppercase mb-3">
                  {card.title}
                </h3>
                <p class="text-slate-600 leading-relaxed text-sm items-end">
                  {card.text}
                </p>
              </div> */}
            </a>
          );
        })
      }
    </div>
  </div>
</section>

<script>
  const observerOptions = {
    threshold: 0.1,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        const cards = entry.target.querySelectorAll(".stagger-card");
        cards.forEach((card) => {
          card.classList.remove("opacity-0", "translate-y-10");
          card.classList.add("opacity-100", "translate-y-0");
        });
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  const container = document.querySelector("#stagger-container");
  if (container) observer.observe(container);
</script>
