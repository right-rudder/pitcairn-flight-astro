---
import ImageComp from "./ImageComp.astro";

const bookDownloadData = {
  eyebrow: "Still looking for more information on pilot training?",
  headline: "Get Your FREE Pilot Training Guide Book!",
  bodyCopy: `We've prepared this free booklet which explains everything you need to know for your pilot certificate.`,
  image: {
    src: "/src/assets/old-website/pitcairn-flight-academy_Philadelphia-PA_pilot-trainingpottstown-PA_book-mockup.webp",
    alt: "Book mockup at Pitcairn Flight Academy in Pottstown, PA",
  },
  buttons: [
    {
      title: "Download Ebook",
      href: "#",
      class: "btn-primary",
    },
  ],
};

// interface Props {
//   data: {
//     eyebrow: string;
//     headline: string;
//     bodyCopy: string;
//     image: {
//       src: string;
//       alt: string;
//     };
//     buttons?: [
//       {
//         title: string;
//         href: string;
//         class: string;
//       },
//     ];
//   };
// }

interface Props {
  data?: {
    eyebrow: string;
    headline: string;
    bodyCopy: string;
    image: {
      src: string;
      alt: string;
    };
    buttons?: [
      {
        title: string;
        href: string;
        class: string;
      },
    ];
  };
}
const { data = bookDownloadData } = Astro.props;
---

<section class="py-16 md:py-24 bg-sky-950 overflow-hidden">
  <div class="max-w-7xl mx-auto px-5 md:px-8 lg:px-12">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
      <div
        class="reveal opacity-0 -translate-x-8 transition-all duration-1000 ease-out delay-200"
      >
        <p
          class="text-sky-700 font-bold uppercase tracking-widest text-sm mb-2"
        >
          {data.eyebrow}
        </p>
        <h2
          class="title !text-[2.5rem] uppercase !font-main-header tracking-wide !text-slate-50 mb-6"
          set:html={data.headline}
        />
        <p
          class="font-sans text-slate-50 leading-relaxed"
          set:html={data.bodyCopy}
        />
        {
          data.buttons &&
            data.buttons.map((btn) => (
              <div class="pt-8 flex justify-center">
                <a
                  href={btn.href}
                  class={`${btn.class} uppercase leading-relaxed `}
                >
                  {btn.title}
                </a>
              </div>
            ))
        }
      </div>

      <ImageComp
        src={data.image.src}
        alt={data.image.alt}
        classes="w-full h-full object-cover object-center shadow-xl"
      />
    </div>
  </div>
</section>

<script>
  const observerOptions = {
    root: null,
    threshold: 0.1,
    rootMargin: "0px 0px -50px 0px",
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.remove(
          "opacity-0",
          "translate-x-8",
          "-translate-x-8",
        );
        entry.target.classList.add("opacity-100", "translate-x-0");
        observer.unobserve(entry.target);
      }
    });
  }, observerOptions);

  document.querySelectorAll(".reveal").forEach((el) => observer.observe(el));
</script>
