---
import { type CollectionEntry, getCollection } from "astro:content";
import ImageComp from "../ImageComp.astro";


type Program = CollectionEntry<"programs">;

const programs = await getCollection("programs");
const sortedPrograms = programs.sort(
  (a: Program, b: Program) => (a.data.order || 999) - (b.data.order || 999)
);

const heroData = {
  image: {
    src: "/src/assets/placeholder-dark-clouds-pitcairn-flight-academy-instrument-rating.webp",
    alt: "imagePlaceholder",
  },
  title: "Pilot Training",
  subTitle:
    "Pitcairn Flight Academy is the perfect place to kickstart your pilot training journey. We're here to help you get your wings and achieve your dream of becoming a pilot. Join us and start on an exciting adventure in the world of aviation. Explore our comprehensive flight training programs designed to take you from zero to hero, learn about the Pilot Training Process and How to become a pilot.",
  cta: [
    {
      url: "/enroll",
      text: "Enroll Now",
    },
  ],
};

const metaProps = {
  siteTitle: "Flight Training Programs | {COMPANY_NAME}",
  siteDescription: "Explore our Part 141 and Part 61 pilot training programs. From the Professional Airline Pilot Track to individual ratings, we provide a structured path to the cockpit.",
  siteKeywords: "flight school programs, professional pilot track, private pilot license, instrument rating, commercial pilot certificate, multi-engine training,  flight courses"
};
---
  <!-- Programs Grid -->
    <section class="pb-20 px-20 flex flex-wrap justify-center gap-6">
      {sortedPrograms.map((program) => (
        <article class="group w-full lg:w-[45%] relative flex flex-col bg-white rounded-2xl  overflow-hidden shadow-md group hover:shadow-2xl transition-all duration-300 border border-muted-100">
          <!-- Top Image Container -->
          <ImageComp
            src={program.data.image}
            alt={program.data.alt || program.data.title}
            class="absolute inset-0 w-full h-full object-cover animate-fast-zoom lg:animate-none group-hover:animate-fast-zoom"
          />
          <!-- Decorative gradient header -->
          <div class="absolute top-0 left-0 right-0 h-1 bg-linear-to-r from-monza-600 via-monza-500 to-monza-400"></div>
          
          <!-- Card Content -->
          <div class="relative bg-white/90 lg:bg-white group-hover:bg-white/90 p-8 flex-1 flex flex-col lg:translate-y-3/5 group-hover:translate-y-0 transition duration-500">
            <!-- Badge & Duration -->
            <div class="flex items-center justify-between mb-6">
              <div class="flex items-center gap-3">
                {program.data.programIntroduction?.highlights?.find(h => h.highlightName.toLowerCase().includes('duration')) && (
                  <div class="flex items-center gap-1.5 text-sm text-muted-600 bg-muted-100 px-3 py-1.5 rounded-2xl ">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="font-medium">{program.data.programIntroduction.highlights.find(h => h.highlightName.toLowerCase().includes('duration'))?.highlightValue}</span>
                  </div>
                )}
              </div>
              {program.data.programIntroduction?.highlights?.find(h => h.highlightName.toLowerCase().includes('cost') || h.highlightName.toLowerCase().includes('price')) && (
                <div class="text-sm font-bold text-monza-600">
                  {program.data.programIntroduction.highlights.find(h => h.highlightName.toLowerCase().includes('cost') || h.highlightName.toLowerCase().includes('price'))?.highlightValue}
                </div>
              )}
            </div>

            <!-- Title -->
            <h3 class="text-2xl font-title font-bold text-gray-900 mb-3 group-hover:text-monza-600 transition-colors duration-700">
              {program.data.title}
            </h3>

            <!-- Description -->
            <p class="text-gray-600 pb-12 mb-6 leading-relaxed flex-1">
              {program.data.description}
            </p>

            <!-- Highlights -->
            {program.data.programIntroduction?.programHighlights?.benefits && program.data.programIntroduction.programHighlights.benefits.length > 0 && (
              <div class="mb-6">
                <h4 class="text-xs font-semibold text-muted-700 uppercase tracking-wider mb-3">What You'll Learn</h4>
                <ul class="space-y-2.5">
                  {program.data.programIntroduction.programHighlights.benefits.slice(0, 4).map((highlight) => (
                    <li class="flex items-start text-sm text-gray-700">
                      <div class="shrink-0 w-5 h-5 rounded-2xl  bg-monza-100 flex items-center justify-center mr-3 mt-0.5 group-hover:bg-monza-600 transition-colors duration-1000">
                        <svg class="w-3 h-3 text-monza-600 group-hover:text-white transition-colors duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                        </svg>
                      </div>
                      <span class="leading-tight">{highlight}</span>
                    </li>
                  ))}
                </ul>
              </div>
            )}

            <!-- Requirements Preview -->
            {program.data.programIntroduction?.programHighlights?.requirements && program.data.programIntroduction.programHighlights.requirements.length > 0 && (
              <div class="mb-6 pb-6 border-t border-muted-100 pt-6">
                <div class="flex items-center gap-2 text-xs text-muted-600">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  <span class="font-medium">{program.data.programIntroduction.programHighlights.requirements.length} Requirements</span>
                </div>
              </div>
            )}

            <!-- CTA Link -->
            <a 
              href={`/programs/${program.slug}`}
              class="group/btn relative inline-flex items-center justify-center w-full px-6 py-3.5 font-semibold text-white bg-linear-to-r from-monza-600 to-monza-500 rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-monza-500/30 hover:-translate-y-0.5"
            >
              <span class="relative z-10 flex items-center gap-2">
                View Program Details
                <svg class="w-5 h-5 group-hover/btn:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
              </span>
              <div class="absolute inset-0 bg-linear-to-r from-monza-700 to-monza-600 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300"></div>
            </a>
          </div>

          <!-- Hover effect overlay -->
          <div class="absolute inset-0 border-2 border-monza-600 rounded-2xl  opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
        </article>
      ))}
    </section>
